"use strict";angular.module("valeiMeSaoFranciscoApp",["ngAnimate","ngResource","ui.router","ngSanitize"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("main",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl"}).state("plot",{url:"/plot",templateUrl:"views/plot.html"}).state("plot2",{url:"/plot2",templateUrl:"views/plot2.html"}).state("map",{url:"/map",templateUrl:"views/map.html"}).state("about",{url:"/about",templateUrl:"views/about.html",controller:"AboutCtrl"})}]),angular.module("valeiMeSaoFranciscoApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("valeiMeSaoFranciscoApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("valeiMeSaoFranciscoApp").run(["$templateCache",function(a){a.put("views/about.html",'<div class="container about-section"> <h1> Valei-me São Francisco </h1> <p class="description">O projeto de transposição do Rio São Francisco é um tema bastante polêmico, pois engloba a suposta tentativa de solucionar um problema que há muito afeta as populações do semi-árido brasileiro, a seca; e, ao mesmo tempo, trata-se de um projeto delicado do ponto de vista ambiental, pois irá afetar um dos rios mais importantes do Brasil, tanto pela sua extensão e importância na manutenção da biodiversidade, quanto pela sua utilização em transportes e abastecimento.</p> <p class="description"> Além disso, muitas das cidades onde a obra acontecem não possuem tratamento de esgoto adequado, acabando por poluir a água vinda do rio. Tendo isso em vista, o projeto <b>"Valei-me São Francisco"</b> buscou informar ao leitor a respeito da distribuição de água e tratamento de esgoto nas cidades beneficiadas pela transposição.</p> </div>'),a.put("views/main.html",'<div class="g-intro"> <div class="container"> <div class="g-intro-img"> <img src="images/logo.46c22e6a.png" alt="Valei-me São Francisco"> </div> <div class="g-intro-subtitle"> <p> Dentre os municípios que serão beneficiados coma a transposição do rio São francisco, nem todos contam com estação de tratamento de esgoto. </p> </div> <div class="row"> <div class="col-xs-6 col-sm-4 col-sm-offset-2"> <a ui-sref="map" class="btn btn-primary btn-block">Municípios beneficiados</a> </div> <div class="col-xs-6 col-sm-4"> <a ui-sref="plot" class="btn btn-primary btn-block">População atendida</a> </div> </div> </div> </div>'),a.put("views/map.html",'<div class="container text-center"> <h1>Municípios beneficiados pela transposição do rio São Francisco</h1> <p> O gráfico abaixo mostra quais são estes municípios e onde estão localizados. </p> <div id="chart"></div> </div> <script>var\n      width = 750,\n      height = 400;\n\n  var svg = d3.select("#chart")\n      .append("svg")\n      .attr(\'version\', \'1.1\')\n      .attr(\'viewBox\', \'0 0 \'+width+\' \'+height)\n      .attr(\'width\', \'100%\')\n      .attr(\'class\', \'map-chart\');\n\n  var projection = d3.geoAlbers()\n      .center([-35.5, -7.6])\n      .rotate([0, 0])\n      .parallels([0, 0])\n      .scale(3200);\n\n  var path = d3.geoPath().projection(projection);\n  var scale = d3.scaleThreshold();\n\n  d3.queue()\n    .defer(d3.json, "br.json")\n    .defer(d3.json, "sab.json")\n    .defer(d3.csv, "municipios_beneficiados.csv")\n    .await(draw);\n\n  function draw(error, br, sab, beneficiados) {\n    if (error) throw error;\n\n    var estados = topojson.feature(br, br.objects.geo_estados);\n    var municipios = topojson.feature(sab, sab.objects.municipios_sab);\n\n    scale\n      .domain([0.5, 0.9, 1])\n      .range(["#d35400","#f1c40f", "#3498db"]);\n\n    svg.selectAll(".municipios")\n      .data(municipios.features)\n    .enter().append("path")\n      .attr("id", function(d) { return "m-"+d.properties.ID; })\n      .attr("d", path)\n      .attr("class", "semiarido");\n\n    svg.selectAll(".estados")\n      .data(estados.features)\n    .enter().append("path")\n      .attr("id", function(d) { return "uf-"+d.properties.sigla; })\n      .attr("d", path)\n      .attr("class", "brasil");\n\n    svg.selectAll(".label")\n      .data(estados.features)\n    .enter().append("text")\n      .attr("x", function(d) { return path.centroid(d)[0]; })\n      .attr("y", function(d) { return path.centroid(d)[1]; })\n      .attr("class", "label")\n      .attr("id", function(d) { return "lb-"+d.properties.sigla })\n      .text(function(d) { return d.properties.nome });\n\n    for (var i = 0; i < beneficiados.length; i++) {\n      if (beneficiados[i].taxa_agua) {\n        svg.select("#m-" + beneficiados[i].codigo_ibg)\n          .attr("class", "beneficiados")\n          .attr("fill", scale(beneficiados[i].taxa_agua));\n      } else {\n        svg.select("#m-" + beneficiados[i].codigo_ibg)\n          .attr("class", "beneficiados")\n          .attr("fill", "#ffff80");\n      }\n    }\n  }</script>'),a.put("views/plot.html",'<div class="container"> <h1 class="text-center">População total atendida com abastecimento de água</h1> <div class="row"> <div class="col-xs-6 col-sm-offset-4 col-sm-2"> <a ui-sref="plot" class="btn btn-primary btn-block active">Água</a> </div> <div class="col-xs-6 col-sm-2"> <a ui-sref="plot2" class="btn btn-primary btn-block">Esgoto</a> </div> </div> <br> <div id="plot"></div> </div> <script>var margin = {top: 40, right: 40, bottom: 40, left: 40};\n  var width = 960 - margin.left - margin.right,\n      height = 480 - margin.top - margin.bottom;\n\n  var svg = d3.select("#plot")\n      .append("svg")\n      .attr(\'version\', \'1.1\')\n      .attr(\'viewBox\', \'0 0 \'+(width + margin.left + margin.right)+\' \'+(height + margin.top + margin.bottom))\n      .attr(\'width\', \'100%\')\n      .attr(\'class\', \'map-chart\');\n\n  var\n    x = d3.scaleLinear().range([0, width]),\n    xAxis = d3.axisBottom(x).tickFormat(d3.format("")),\n    y = d3.scaleLinear().range([height, 0]),\n    yAxis = d3.axisLeft(y).tickFormat(d3.format(".0%"));\n\n  var line = d3.line()\n    .x(function(d) { return x(d.ano); })\n    .y(function(d) { return y(d.taxa_agua); });\n\n  var g = svg.append("g")\n    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");\n\n  d3.csv("historico.csv", function(error, data) {\n    if (error) throw error;\n\n    x.domain([d3.min(data, function(d) { return +d.ano; }), d3.max(data, function(d) { return +d.ano; })]);\n    y.domain([0, 1]);\n\n    g.append("g")\n     .attr("transform", "translate(0," + height + ")")\n     .call(xAxis);\n    g.append("g")\n    .call(yAxis);\n\n    g.selectAll(".dot")\n    .data(data)\n    .enter().append("circle")\n      .attr("class", function(d) { return "dot "+d.nome})\n      .attr("r", 5)\n      .attr("cx", function(d) { return x(+d.ano);})\n      .attr("cy", function(d) { return y(+d.taxa_agua);})\n      .style("fill", "#2980b9")\n      .style("opacity", "0.1")\n      .on("mouseover", function(d) {\n        console.log(d.nome);\n      });\n  });</script>'),a.put("views/plot2.html",'<div class="container"> <h1 class="text-center">População total atendida com esgoto</h1> <div class="row"> <div class="col-xs-6 col-sm-offset-4 col-sm-2"> <a ui-sref="plot" class="btn btn-primary btn-block">Água</a> </div> <div class="col-xs-6 col-sm-2"> <a ui-sref="plot2" class="btn btn-primary btn-block active">Esgoto</a> </div> </div> <br> <div id="plot"></div> </div> <script>var margin = {top: 40, right: 40, bottom: 40, left: 40};\n  var width = 960 - margin.left - margin.right,\n      height = 480 - margin.top - margin.bottom;\n\n  var svg = d3.select("#plot")\n      .append("svg")\n      .attr(\'version\', \'1.1\')\n      .attr(\'viewBox\', \'0 0 \'+(width + margin.left + margin.right)+\' \'+(height + margin.top + margin.bottom))\n      .attr(\'width\', \'100%\')\n      .attr(\'class\', \'map-chart\');\n\n  var\n    x = d3.scaleLinear().range([0, width]),\n    xAxis = d3.axisBottom(x).tickFormat(d3.format("")),\n    y = d3.scaleLinear().range([height, 0]),\n    yAxis = d3.axisLeft(y).tickFormat(d3.format(".0%"));\n\n  var line = d3.line()\n    .x(function(d) { return x(d.ano); })\n    .y(function(d) { return y(d.taxa_agua); });\n\n  var g = svg.append("g")\n    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");\n\n  d3.csv("historico.csv", function(error, data) {\n    if (error) throw error;\n\n    x.domain([d3.min(data, function(d) { return +d.ano; }), d3.max(data, function(d) { return +d.ano; })]);\n    y.domain([0, 1]);\n\n    g.append("g")\n     .attr("transform", "translate(0," + height + ")")\n     .call(xAxis);\n    g.append("g")\n    .call(yAxis);\n\n    g.selectAll(".dot")\n    .data(data)\n    .enter().append("circle")\n      .attr("class", function(d) { return "dot "+d.nome})\n      .attr("r", 5)\n      .attr("cx", function(d) { return x(+d.ano);})\n      .attr("cy", function(d) { return y(+d.taxa_agua);})\n      .style("fill", "#a17f40")\n      .style("opacity", "0.1")\n      .on("mouseover", function(d) {\n        console.log(d.nome);\n      });\n  });</script>')}]);